name: Email service build CI
# This workflow is triggered on pushes to the /microservices/email/app/ directory.
# The workflow does not trigger on main and pre-prod branch
on:
  push:
    paths:
      - 'microservices/email/app/**'
    branches-ignore:
      - main
      - pre-prod

jobs:
  build:
    name: Docker Build Email
    runs-on: ubuntu-18.04
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Build Email Docker image
        # Official docker action: https://github.com/docker/build-push-action
        uses: docker/build-push-action@v1.1.0
        with:
          # github.repository -> alexandr-io/backend
          repository: ${{github.repository}}
          path: microservices/email/app
          push: false
